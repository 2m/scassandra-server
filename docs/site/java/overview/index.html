<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Overview - Stubbed Cassandra</title>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>

  <style>
    body {font-size: 90%;}
    pre, code {font-size: 100%;}
    h3, h4, h5, h6 {color: #2980b9; font-weight: 300}
  </style> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Stubbed Cassandra</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
    
        
            <li class="toctree-l1 ">
                <a class="" href="../../about">About</a>
            </li>
        

    
        
        <span>Java Client</span>
            
                <li class="toctree-l1 current">
                    <a class="current" href=".">Overview</a>
                    
                        <ul>
                        
                            <li class="toctree-l2"><a href="#overview">Overview</a></li>
                            
                                <li><a class="toctree-l3" href="#getting-started">Getting started</a></li>
                            
                                <li><a class="toctree-l3" href="#gradle">Gradle:</a></li>
                            
                                <li><a class="toctree-l3" href="#maven">Maven:</a></li>
                            
                                <li><a class="toctree-l3" href="#example-project">Example project</a></li>
                            
                        
                        </ul>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../priming-query">Priming Queries</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../priming-ps">Priming Prepared Statements</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../priming-delays">Priming Delays</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../priming-collections">Priming Collections</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../hamcrest-matchers">Hamcest Matchers</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../activity">Activity Verification</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../column-types">Column Types</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../troubleshooting">Troubleshooting</a>
                    
                </li>
            
        

    
        
        <span>Standlone</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../standalone/overview">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../standalone/activity">Activity Verification</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../standalone/priming-query">Priming Queries</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../standalone/priming-ps">Priming Prepared Statements</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../standalone/priming-cluster-name">Priming Cluster Name</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../standalone/priming-errors">Priming Errors</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../standalone/using-python">Python Driver</a>
                    
                </li>
            
        

    
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="../.."></a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    <li>Overview</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <h2 id="overview">Overview</h2>
<p>So far we have tested Scassandra with the following drivers:</p>
<ul>
<li>Datastax Java Driver 1</li>
<li>Datastax Java Driver 2</li>
<li>Datastax Java Driver 2.1</li>
</ul>
<p>The next Driver we intent to test with is:</p>
<ul>
<li>Astyanax</li>
</ul>
<p><strong><em>Why does the driver matter?</em></strong>  Because Scassandra is pretending to be Cassandra and the driver what we need to fool!
Each driver does different queries on start up and expects slightly different responses. Fortunately the Datstax
Java Drivers don't require anything to be in the system keyspace, if there is nothing there it just carries on. However
the Python Datastax Driver blows up if no rows come back from its query on system.local.</p>
<h3 id="getting-started">Getting started</h3>
<p>The Scassandra Java Client is in Maven central. You can add it as a dependency:</p>
<h3 id="gradle">Gradle:</h3>
<pre><code class="groovy">dependencies {
  testCompile 'org.scassandra:java-client:0.6.0'
}
</code></pre>

<h3 id="maven">Maven:</h3>
<pre><code class="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.scassandra&lt;/groupId&gt;
  &lt;artifactId&gt;java-client&lt;/artifactId&gt;
  &lt;version&gt;0.6.0&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>

<p>If you have dependency clashes with Guava, Apache Http Client etc try the standalone version:</p>
<pre><code class="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.scassandra&lt;/groupId&gt;
  &lt;artifactId&gt;java-client&lt;/artifactId&gt;
  &lt;version&gt;0.6.0&lt;/version&gt;
  &lt;classifier&gt;standalone&lt;/classifier&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>

<p>There are four important classes you'll deal with from Java:</p>
<ul>
<li><strong>ScassandraFactory</strong> - used to create instances of Scassandra</li>
<li><strong>Scassandra</strong> - interface for starting/stopping Scassandra and getting hold of a PrimingClient and an ActivityClient</li>
<li><strong>PrimingClient</strong> - sends priming requests to Scassandra RESTful admin interface</li>
<li><strong>ActivityClient</strong> - retrieves all the recorded queries and prepared statements from the Scassandra RESTful admin interface</li>
</ul>
<p>The PrimingClient and ActivityClient have been created to ease integration for Java developers. Otherwise you would need to construct JSON and send it over HTTP to Scassandra.</p>
<p>You can start a Scassandra instance per unit test and clear all primes and recorded activity between tests.</p>
<pre><code class="java">private static PrimingClient primingClient;
private static ActivityClient activityClient;
private static Scassandra scassandra;


@BeforeClass
public static void startScassandraServer() throws Exception {
   scassandra = ScassandraFactory.createServer();
   scassandra.start();
   primingClient = scassandra.primingClient();
   activityClient = scassandra.activityClient();
}
</code></pre>

<p>You can also add a AfterClass to close Scassandra down:</p>
<pre><code class="java"> @AfterClass
 public static void shutdown() {
     scassandra.stop();
 }
</code></pre>

<h3 id="example-project">Example project</h3>
<p>To see how to use Scassandra in your Java unit and integration tests see the following example project:</p>
<p><a href="https://github.com/chbatey/scassandra-example-java">Scassandra Java Example</a></p>
<p>And particularly the ExampleDaoTest:</p>
<p><a href="https://github.com/chbatey/scassandra-example-java/blob/master/src/test/java/com/batey/examples/scassandra/PersonDaoTest.java">Example JUnit test</a></p>

            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../priming-query" class="btn btn-neutral float-right" title="Priming Queries"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../about" class="btn btn-neutral" title="About"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
      <span><a href="../../about" style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href="../priming-query" style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>
</body>
</html>