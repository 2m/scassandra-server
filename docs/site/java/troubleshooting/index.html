<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Troubleshooting - Stubbed Cassandra</title>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script>

  <style>
    body {font-size: 90%;}
    pre, code {font-size: 100%;}
    h3, h4, h5, h6 {color: #2980b9; font-weight: 300}
  </style> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Stubbed Cassandra</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
    
        
            <li class="toctree-l1 ">
                <a class="" href="../../about">About</a>
            </li>
        

    
        
        <span>Java Client</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../overview">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../priming-query">Priming Queries</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../priming-ps">Priming Prepared Statements</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../priming-delays">Priming Delays</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../priming-collections">Priming Collections</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../hamcrest-matchers">Hamcest Matchers</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../activity">Activity Verification</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../column-types">Column Types</a>
                    
                </li>
            
                <li class="toctree-l1 current">
                    <a class="current" href=".">Troubleshooting</a>
                    
                        <ul>
                        
                            <li class="toctree-l2"><a href="#conflicting-http-client-versions">Conflicting HTTP client versions</a></li>
                            
                                <li><a class="toctree-l3" href="#description">Description</a></li>
                            
                                <li><a class="toctree-l3" href="#example-error">Example error:</a></li>
                            
                                <li><a class="toctree-l3" href="#solution">Solution</a></li>
                            
                        
                        </ul>
                    
                </li>
            
        

    
        
        <span>Standlone</span>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../standalone/overview">Overview</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../standalone/activity">Activity Verification</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../standalone/priming-query">Priming Queries</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../standalone/priming-ps">Priming Prepared Statements</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../standalone/priming-cluster-name">Priming Cluster Name</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../standalone/priming-errors">Priming Errors</a>
                    
                </li>
            
                <li class="toctree-l1 ">
                    <a class="" href="../../standalone/using-python">Python Driver</a>
                    
                </li>
            
        

    
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="../.."></a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    <li>Troubleshooting</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              <h3 id="conflicting-http-client-versions">Conflicting HTTP client versions</h3>
<h4 id="description">Description</h4>
<p>The priming client and activity client use 4.3+ of HTTP client. If your production code uses an older version and you use the eclipse or intellij plugin to generate project artifacts this can often lead to the older production version of http client being used for the test and you get either a NoSuchField or NoSuchMethod error.</p>
<p>The Datastsax Java driver has a transitive dependency on HTTP client so this is likely to happen if you use version 1.* op the Java Driver as it depends on an old version.</p>
<p>So far I've always upgraded the version of HTTP client to 4.3+ and it hasn't affected the Datastax Java driver. However I realize upgrading production dependencies is not always possible and could release .</p>
<h4 id="example-error">Example error:</h4>
<pre><code>java.lang.NoSuchFieldError: INSTANCE
    at org.apache.http.impl.io.DefaultHttpRequestWriterFactory.&lt;init&gt;(DefaultHttpRequestWriterFactory.java:52)
    at org.apache.http.impl.io.DefaultHttpRequestWriterFactory.&lt;init&gt;(DefaultHttpRequestWriterFactory.java:56)
    at org.apache.http.impl.io.DefaultHttpRequestWriterFactory.&lt;clinit&gt;(DefaultHttpRequestWriterFactory.java:46)
    at org.apache.http.impl.conn.ManagedHttpClientConnectionFactory.&lt;init&gt;(ManagedHttpClientConnectionFactory.java:72)
    at org.apache.http.impl.conn.ManagedHttpClientConnectionFactory.&lt;init&gt;(ManagedHttpClientConnectionFactory.java:84)
    at org.apache.http.impl.conn.ManagedHttpClientConnectionFactory.&lt;clinit&gt;(ManagedHttpClientConnectionFactory.java:59)
    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager$InternalConnectionFactory.&lt;init&gt;(PoolingHttpClientConnectionManager.java:487)
    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.&lt;init&gt;(PoolingHttpClientConnectionManager.java:147)
    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.&lt;init&gt;(PoolingHttpClientConnectionManager.java:136)
    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.&lt;init&gt;(PoolingHttpClientConnectionManager.java:112)
    at org.apache.http.impl.client.HttpClientBuilder.build(HttpClientBuilder.java:726)
    at org.apache.http.impl.client.HttpClients.createDefault(HttpClients.java:58)
    at org.scassandra.http.client.PrimingClient.&lt;init&gt;(PrimingClient.java:26)
</code></pre>

<h4 id="solution">Solution</h4>
<p>Use 4.3.3 of http client.
E.g add this to your gradle:</p>
<pre><code>compile 'org.apache.httpcomponents:httpclient:4+'
</code></pre>


            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../standalone/overview" class="btn btn-neutral float-right" title="Overview"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../column-types" class="btn btn-neutral" title="Column Types"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
        
      <span><a href="../column-types" style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href="../../standalone/overview" style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>
</body>
</html>